{% extends "blog/base.html" %}

{% block content %}
<h3>Panel WIP</h3>


<div class="container">

<div class="table-responsive">

<div class="row" id="parsed_csv_list">

</div>
</div>

<button type="button" id="convert">Convert</button>


<script type="text/javascript">

var cuadros= [];



console.log(cuadros);



/// PAra transformar los cambios en modo texto a un array y generar un form por cada línea.

displayHTMLTable();

$("#convert").click(function()
{

updatecuadros();
//displayHTMLTable();

});

////// Función que muestra el input paresado

function displayHTMLTable(){
  var table = "<table class='table table-hover' id='table'>";

    var rows = 17;
    var columns = 21;

  for(i=0;i<rows-1;i++){
    table+= "<tr>";


    for(j=0;j<columns-1;j++){
      table+= "<td style='font-size: 15px;'>";
      //table+= ".";
      table+= "</th>";

    }
    table+= "</tr>";
  }
  table+= "</table>";
  $("#parsed_csv_list").html(table); //Descomentar esto para ver la tabla grande



  //cambiando color de la table:
  creacuadro(1,5,"zTCY2",3,5);
  creacuadro(2,5,"zTCY1",3,5);
  creacuadro(3,5,"zHCR2",3,5);
  creacuadro(4,5,"zHCR1",3,5);
  creacuadro(13,0,"zSob2",3,5);
  creacuadro(14,0,"zWRD2",3,5);
  creacuadro(15,0,"zWRD1",3,5);
  creacuadro(17,0,"zSob1",3,5);
  creacuadro(18,0,"zFFW2",3,5);
  creacuadro(19,0,"zFFW1",3,5);
  creacuadro(20,0,"zDRO2",3,5);
  creacuadro(21,0,"zDRO1",3,5);
  creacuadro(22,0,"zFFG2",3,5);
  creacuadro(23,0,"zFFG1",3,5);

}

function creacuadro(x,y,texto,a,l){

  var myTable = document.getElementById("table");//.getElementsByTagName("td");
  myTable.rows[y].cells[x].innerHTML = texto + "</br>" + "%";
  myTable.rows[y].cells[x].style.backgroundColor = "yellow"

  myTable.rows[y].cells[x].colSpan = parseInt(a);
  myTable.rows[y].cells[x].rowSpan = parseInt(l);

}



function updatecuadros(){

  for (var i=0; i < cuadros.length; i++)
  {

    var random = Math.floor((Math.random() * 100) + 1);
    console.log(random)

    var myTable = document.getElementById("table");//.getElementsByTagName("td");
    myTable.rows[cuadros[i][1]].cells[cuadros[i][0]].innerHTML = cuadros[i][2] + "</br>" + random.toString() + "%";
    myTable.rows[cuadros[i][1]].cells[cuadros[i][0]].style.backgroundColor = "green"//"yellow";

    if (random<=70)
    {myTable.rows[cuadros[i][1]].cells[cuadros[i][0]].style.backgroundColor = "green"}

    if (random>70 && random<90)
    {myTable.rows[cuadros[i][1]].cells[cuadros[i][0]].style.backgroundColor = "yellow"}

    if (random>90)
    {myTable.rows[cuadros[i][1]].cells[cuadros[i][0]].style.backgroundColor = "red"}


    /*
    var myTable = document.getElementById("table");//.getElementsByTagName("td");
    myTable.rows[y].cells[x].innerHTML = texto + "</br>" + "%";
    myTable.rows[y].cells[x].style.backgroundColor = "green"//"yellow";
    myTable.rows[y].cells[x].colSpan = parseInt(a);
    myTable.rows[y].cells[x].rowSpan = parseInt(l);
    */
  }

}


</script>

{% endblock %}
