{% extends "blog/base.html" %}
<script>
{% block jquery %}

var endpoint='/api/data/';//La alternativa es usar el {% url "api-data"  %}
var customersDjango = parseInt("{{ customers }}");
var defaultData = [];
var labels = [];
console.log(customersDjango);
$.ajax({
    method: "GET",
    url: endpoint,
    success: function(response_data){
      labels = response_data.labelDias;
      defaultData = response_data.Producciones;
      console.log(response_data);
      console.log(response_data.customers * 331);
      setChart();

    },
    error: function(error_data){
      console.log("error");
      console.log(error_data);
    }

})


function setChart(){

  var ctx = document.getElementById("myChart").getContext('2d');
  var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: labels,
          datasets: [{
              label: '# de producciones',
              data: defaultData,
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                  'rgba(255, 159, 64, 0.2)'
              ],
              borderColor: [
                  'rgba(255,99,132,1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 192, 192, 1)',
                  'rgba(153, 102, 255, 1)',
                  'rgba(255, 159, 64, 1)'
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          }
      }
  });

}



{% endblock %}
</script>

{% block content %}
<div class="container">
<h4>Welcome</h4>

<canvas id="myChart" width="800" height="400"></canvas>


</div>



{% endblock content %}
